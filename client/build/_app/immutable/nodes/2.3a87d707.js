import{S as Ee,i as We,s as De,k as _,a as $,q as S,l as h,m as g,c as k,r as C,h as u,n as b,J as ke,K as Ue,b as _e,D as r,u as te,H as fe,y as Be,z as qe,p as dt,A as He,L as oe,g as Ge,d as Xe,B as Ye,M as ct,N as ut}from"../chunks/index.05bdcf15.js";import{w as mt}from"../chunks/index.01534fe0.js";const _t=!0,Rt=Object.freeze(Object.defineProperty({__proto__:null,prerender:_t},Symbol.toStringTag,{value:"Module"}));var ht=Object.defineProperty,Pe=(e,t)=>{for(var a in t)ht(e,a,{get:t[a],enumerable:!0})},yt={};Pe(yt,{convertFileSrc:()=>gt,invoke:()=>Ae,transformCallback:()=>de});function pt(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function de(e,t=!1){let a=pt(),i=`_${a}`;return Object.defineProperty(window,i,{value:s=>(t&&Reflect.deleteProperty(window,i),e==null?void 0:e(s)),writable:!1,configurable:!0}),a}async function Ae(e,t={}){return new Promise((a,i)=>{let s=de(d=>{a(d),Reflect.deleteProperty(window,`_${l}`)},!0),l=de(d=>{i(d),Reflect.deleteProperty(window,`_${s}`)},!0);window.__TAURI_IPC__({cmd:e,callback:s,error:l,...t})})}function gt(e,t="asset"){let a=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${a}`:`${t}://localhost/${a}`}async function n(e){return Ae("tauri",e)}var wt={};Pe(wt,{TauriEvent:()=>Ze,emit:()=>ft,listen:()=>Me,once:()=>bt});async function Ke(e,t){return n({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function Je(e,t,a){await n({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:a}})}async function Te(e,t,a){return n({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:de(a)}}).then(i=>async()=>Ke(e,i))}async function Qe(e,t,a){return Te(e,t,i=>{a(i),Ke(e,i.id).catch(()=>{})})}var Ze=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(Ze||{});async function Me(e,t){return Te(e,null,t)}async function bt(e,t){return Qe(e,null,t)}async function ft(e,t){return Je(e,void 0,t)}var Mt={};Pe(Mt,{CloseRequestedEvent:()=>rt,LogicalPosition:()=>tt,LogicalSize:()=>et,PhysicalPosition:()=>ue,PhysicalSize:()=>ce,UserAttentionType:()=>at,WebviewWindow:()=>ae,WebviewWindowHandle:()=>it,WindowManager:()=>nt,appWindow:()=>ve,availableMonitors:()=>Wt,currentMonitor:()=>vt,getAll:()=>st,getCurrent:()=>ie,primaryMonitor:()=>Et});var et=class{constructor(e,t){this.type="Logical",this.width=e,this.height=t}},ce=class{constructor(e,t){this.type="Physical",this.width=e,this.height=t}toLogical(e){return new et(this.width/e,this.height/e)}},tt=class{constructor(e,t){this.type="Logical",this.x=e,this.y=t}},ue=class{constructor(e,t){this.type="Physical",this.x=e,this.y=t}toLogical(e){return new tt(this.x/e,this.y/e)}},at=(e=>(e[e.Critical=1]="Critical",e[e.Informational=2]="Informational",e))(at||{});function ie(){return new ae(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0})}function st(){return window.__TAURI_METADATA__.__windows.map(e=>new ae(e.label,{skip:!0}))}var Ne=["tauri://created","tauri://error"],it=class{constructor(e){this.label=e,this.listeners=Object.create(null)}async listen(e,t){return this._handleTauriEvent(e,t)?Promise.resolve(()=>{let a=this.listeners[e];a.splice(a.indexOf(t),1)}):Te(e,this.label,t)}async once(e,t){return this._handleTauriEvent(e,t)?Promise.resolve(()=>{let a=this.listeners[e];a.splice(a.indexOf(t),1)}):Qe(e,this.label,t)}async emit(e,t){if(Ne.includes(e)){for(let a of this.listeners[e]||[])a({event:e,id:-1,windowLabel:this.label,payload:t});return Promise.resolve()}return Je(e,this.label,t)}_handleTauriEvent(e,t){return Ne.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}},nt=class extends it{async scaleFactor(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"scaleFactor"}}}})}async innerPosition(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerPosition"}}}}).then(({x:e,y:t})=>new ue(e,t))}async outerPosition(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerPosition"}}}}).then(({x:e,y:t})=>new ue(e,t))}async innerSize(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerSize"}}}}).then(({width:e,height:t})=>new ce(e,t))}async outerSize(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerSize"}}}}).then(({width:e,height:t})=>new ce(e,t))}async isFullscreen(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFullscreen"}}}})}async isMinimized(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMinimized"}}}})}async isMaximized(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximized"}}}})}async isDecorated(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isDecorated"}}}})}async isResizable(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isResizable"}}}})}async isVisible(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isVisible"}}}})}async title(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"title"}}}})}async theme(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"theme"}}}})}async center(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"center"}}}})}async requestUserAttention(e){let t=null;return e&&(e===1?t={type:"Critical"}:t={type:"Informational"}),n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"requestUserAttention",payload:t}}}})}async setResizable(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setResizable",payload:e}}}})}async setTitle(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setTitle",payload:e}}}})}async maximize(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"maximize"}}}})}async unmaximize(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unmaximize"}}}})}async toggleMaximize(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"toggleMaximize"}}}})}async minimize(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"minimize"}}}})}async unminimize(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unminimize"}}}})}async show(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"show"}}}})}async hide(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"hide"}}}})}async close(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"close"}}}})}async setDecorations(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setDecorations",payload:e}}}})}async setAlwaysOnTop(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setAlwaysOnTop",payload:e}}}})}async setContentProtected(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setContentProtected",payload:e}}}})}async setSize(e){if(!e||e.type!=="Logical"&&e.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSize",payload:{type:e.type,data:{width:e.width,height:e.height}}}}}})}async setMinSize(e){if(e&&e.type!=="Logical"&&e.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setMaxSize(e){if(e&&e.type!=="Logical"&&e.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaxSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setPosition(e){if(!e||e.type!=="Logical"&&e.type!=="Physical")throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setFullscreen(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFullscreen",payload:e}}}})}async setFocus(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFocus"}}}})}async setIcon(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIcon",payload:{icon:typeof e=="string"?e:Array.from(e)}}}}})}async setSkipTaskbar(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSkipTaskbar",payload:e}}}})}async setCursorGrab(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorGrab",payload:e}}}})}async setCursorVisible(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorVisible",payload:e}}}})}async setCursorIcon(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorIcon",payload:e}}}})}async setCursorPosition(e){if(!e||e.type!=="Logical"&&e.type!=="Physical")throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setIgnoreCursorEvents(e){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIgnoreCursorEvents",payload:e}}}})}async startDragging(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"startDragging"}}}})}async onResized(e){return this.listen("tauri://resize",t=>{t.payload=ot(t.payload),e(t)})}async onMoved(e){return this.listen("tauri://move",t=>{t.payload=lt(t.payload),e(t)})}async onCloseRequested(e){return this.listen("tauri://close-requested",t=>{let a=new rt(t);Promise.resolve(e(a)).then(()=>{if(!a.isPreventDefault())return this.close()})})}async onFocusChanged(e){let t=await this.listen("tauri://focus",i=>{e({...i,payload:!0})}),a=await this.listen("tauri://blur",i=>{e({...i,payload:!1})});return()=>{t(),a()}}async onScaleChanged(e){return this.listen("tauri://scale-change",e)}async onMenuClicked(e){return this.listen("tauri://menu",e)}async onFileDropEvent(e){let t=await this.listen("tauri://file-drop",s=>{e({...s,payload:{type:"drop",paths:s.payload}})}),a=await this.listen("tauri://file-drop-hover",s=>{e({...s,payload:{type:"hover",paths:s.payload}})}),i=await this.listen("tauri://file-drop-cancelled",s=>{e({...s,payload:{type:"cancel"}})});return()=>{t(),a(),i()}}async onThemeChanged(e){return this.listen("tauri://theme-changed",e)}},rt=class{constructor(e){this._preventDefault=!1,this.event=e.event,this.windowLabel=e.windowLabel,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}},ae=class extends nt{constructor(e,t={}){super(e),t!=null&&t.skip||n({__tauriModule:"Window",message:{cmd:"createWebview",data:{options:{label:e,...t}}}}).then(async()=>this.emit("tauri://created")).catch(async a=>this.emit("tauri://error",a))}static getByLabel(e){return st().some(t=>t.label===e)?new ae(e,{skip:!0}):null}},ve;"__TAURI_METADATA__"in window?ve=new ae(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0}):(console.warn(`Could not find "window.__TAURI_METADATA__". The "appWindow" value will reference the "main" window label.
Note that this is not an issue if running this frontend on a browser instead of a Tauri window.`),ve=new ae("main",{skip:!0}));function Le(e){return e===null?null:{name:e.name,scaleFactor:e.scaleFactor,position:lt(e.position),size:ot(e.size)}}function lt(e){return new ue(e.x,e.y)}function ot(e){return new ce(e.width,e.height)}async function vt(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"currentMonitor"}}}}).then(Le)}async function Et(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"primaryMonitor"}}}}).then(Le)}async function Wt(){return n({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"availableMonitors"}}}}).then(e=>e.map(Le))}const me=mt({currentMedia:{},sourcePriority:["SpotifyAB.SpotifyMusic_zpdnekdrzrea0!Spotify","foobar2000.exe"].join(`
`).toLowerCase()});function Fe(e){var a;if(console.log("handling Media update",e),!e){console.log("skipping Media",e);return}let t;(a=e.thumbnail)!=null&&a.data&&(t=URL.createObjectURL(new Blob([new Uint8Array(e.thumbnail.data)],{type:e.thumbnail.content_type}))),me.update(i=>{const s=i.currentMedia[e.session.source];return{currentMedia:{...i.currentMedia,[e.session.source]:{...s??{},session:e.session,thumbnail:{...e.thumbnail,url:t},timestamp:Date.now()}},sourcePriority:i.sourcePriority}})}function xe(e){if(console.log("handling Model update",e),!e){console.log("skipping Model",e);return}me.update(t=>{const a=t.currentMedia[e.session.source];return{currentMedia:{...t.currentMedia,[e.session.source]:{...a??{},session:e.session,timestamp:Date.now()}},sourcePriority:t.sourcePriority}})}function Dt(e){var A,H,G,X,Y,U;let t,a,i,s,l,d,M=(((G=(H=(A=e[0])==null?void 0:A.session)==null?void 0:H.media)==null?void 0:G.title)??"")+"",P,W,m,o=(((U=(Y=(X=e[0])==null?void 0:X.session)==null?void 0:Y.media)==null?void 0:U.artist)??"")+"",y,p;return{c(){t=_("div"),a=_("img"),s=$(),l=_("div"),d=_("div"),P=S(M),W=$(),m=_("div"),y=S(o),this.h()},l(v){t=h(v,"DIV",{id:!0,class:!0});var w=g(t);a=h(w,"IMG",{id:!0,src:!0,class:!0}),s=k(w),l=h(w,"DIV",{id:!0,class:!0});var T=g(l);d=h(T,"DIV",{id:!0,class:!0});var z=g(d);P=C(z,M),z.forEach(u),W=k(T),m=h(T,"DIV",{id:!0,class:!0});var f=g(m);y=C(f,o),f.forEach(u),T.forEach(u),w.forEach(u),this.h()},h(){var v,w,T,z,f,N;b(a,"id","thumbnail"),ke(a.src,i=(w=(v=e[0])==null?void 0:v.thumbnail)==null?void 0:w.url)||b(a,"src",i),b(a,"class","svelte-1w4pto6"),b(d,"id","np-1"),b(d,"class","svelte-1w4pto6"),b(m,"id","np-2"),b(m,"class","svelte-1w4pto6"),b(l,"id","np"),b(l,"class","svelte-1w4pto6"),b(t,"id","root"),b(t,"class",p=Ue(`${((N=(f=(z=(T=e[0])==null?void 0:T.session)==null?void 0:z.playback)==null?void 0:f.status)==null?void 0:N.toLowerCase())??""}`)+" svelte-1w4pto6")},m(v,w){_e(v,t,w),r(t,a),r(t,s),r(t,l),r(l,d),r(d,P),r(l,W),r(l,m),r(m,y)},p(v,[w]){var T,z,f,N,O,V,K,J,F,Q,R,j;w&1&&!ke(a.src,i=(z=(T=v[0])==null?void 0:T.thumbnail)==null?void 0:z.url)&&b(a,"src",i),w&1&&M!==(M=(((O=(N=(f=v[0])==null?void 0:f.session)==null?void 0:N.media)==null?void 0:O.title)??"")+"")&&te(P,M),w&1&&o!==(o=(((J=(K=(V=v[0])==null?void 0:V.session)==null?void 0:K.media)==null?void 0:J.artist)??"")+"")&&te(y,o),w&1&&p!==(p=Ue(`${((j=(R=(Q=(F=v[0])==null?void 0:F.session)==null?void 0:Q.playback)==null?void 0:R.status)==null?void 0:j.toLowerCase())??""}`)+" svelte-1w4pto6")&&b(t,"class",p)},i:fe,o:fe,d(v){v&&u(t)}}}function Pt(e,t,a){let{currentMedia:i}=t;return e.$$set=s=>{"currentMedia"in s&&a(0,i=s.currentMedia)},[i]}class At extends Ee{constructor(t){super(),We(this,t,Pt,Dt,De,{currentMedia:0})}}const Tt=(e,t)=>Object.values(e).sort((i,s)=>s.timestamp-i.timestamp).sort((i,s)=>{var M,P;let l=t.indexOf(((M=i.session)==null?void 0:M.source.toLowerCase())??"_____FIXME_____"),d=t.indexOf(((P=s.session)==null?void 0:P.source.toLowerCase())??"_____FIXME_____");return l=l===-1?Number.MAX_VALUE:l,d=d===-1?Number.MAX_VALUE:d,l-d}).sort((i,s)=>{var l,d;return((d=(l=s.session)==null?void 0:l.playback)==null?void 0:d.status)==="Playing"?1:-1});function Ve(e,t,a){const i=e.slice();return i[8]=t[a],i}function je(e){var M,P,W;let t,a=((M=e[8].session)==null?void 0:M.source)+"",i,s,l=((W=(P=e[8].session)==null?void 0:P.media)==null?void 0:W.title)+"",d;return{c(){t=_("li"),i=S(a),s=S(": "),d=S(l)},l(m){t=h(m,"LI",{});var o=g(t);i=C(o,a),s=C(o,": "),d=C(o,l),o.forEach(u)},m(m,o){_e(m,t,o),r(t,i),r(t,s),r(t,d)},p(m,o){var y,p,A;o&2&&a!==(a=((y=m[8].session)==null?void 0:y.source)+"")&&te(i,a),o&2&&l!==(l=((A=(p=m[8].session)==null?void 0:p.media)==null?void 0:A.title)+"")&&te(d,l)},d(m){m&&u(t)}}}function Lt(e){var Ce,Ie;let t,a,i,s,l,d=e[3]?"Disable decorations":"Enable decorations",M,P,W,m,o,y,p,A,H,G,X,Y,U,v,w=((Ie=(Ce=e[0])==null?void 0:Ce.session)==null?void 0:Ie.source)+"",T,z,f,N,O,V,K,J,F,Q,R,j,he,ye,Z,pe,B,ge,Se;a=new At({props:{currentMedia:e[0]}});let ee=e[1],E=[];for(let c=0;c<ee.length;c+=1)E[c]=je(Ve(e,ee,c));return{c(){t=_("section"),Be(a.$$.fragment),i=$(),s=_("div"),l=_("button"),M=S(d),P=$(),W=_("details"),m=_("summary"),o=S("Priority list"),y=$(),p=_("label"),A=_("span"),H=S("Source priority list"),G=_("br"),X=S("higher = top; not in list = lowest"),Y=$(),U=_("div"),v=S("Current source: "),T=S(w),z=$(),f=_("textarea"),N=$(),O=_("details"),V=_("summary"),K=S("All media"),J=$(),F=_("ol");for(let c=0;c<E.length;c+=1)E[c].c();Q=$(),R=_("details"),j=_("summary"),he=S("Debug"),ye=$(),Z=_("button"),pe=S("Close"),this.h()},l(c){t=h(c,"SECTION",{});var I=g(t);qe(a.$$.fragment,I),i=k(I),s=h(I,"DIV",{id:!0,class:!0});var D=g(s);l=h(D,"BUTTON",{});var se=g(l);M=C(se,d),se.forEach(u),P=k(D),W=h(D,"DETAILS",{class:!0});var q=g(W);m=h(q,"SUMMARY",{});var L=g(m);o=C(L,"Priority list"),L.forEach(u),y=k(q),p=h(q,"LABEL",{});var x=g(p);A=h(x,"SPAN",{});var ne=g(A);H=C(ne,"Source priority list"),G=h(ne,"BR",{}),X=C(ne,"higher = top; not in list = lowest"),ne.forEach(u),Y=k(x),U=h(x,"DIV",{});var we=g(U);v=C(we,"Current source: "),T=C(we,w),we.forEach(u),z=k(x),f=h(x,"TEXTAREA",{style:!0,rows:!0}),g(f).forEach(u),x.forEach(u),q.forEach(u),N=k(D),O=h(D,"DETAILS",{class:!0});var re=g(O);V=h(re,"SUMMARY",{});var ze=g(V);K=C(ze,"All media"),ze.forEach(u),J=k(re),F=h(re,"OL",{});var Oe=g(F);for(let be=0;be<E.length;be+=1)E[be].l(Oe);Oe.forEach(u),re.forEach(u),Q=k(D),R=h(D,"DETAILS",{class:!0});var le=g(R);j=h(le,"SUMMARY",{});var Re=g(j);he=C(Re,"Debug"),Re.forEach(u),ye=k(le),Z=h(le,"BUTTON",{});var $e=g(Z);pe=C($e,"Close"),$e.forEach(u),le.forEach(u),D.forEach(u),I.forEach(u),this.h()},h(){dt(f,"width","calc(100% - 6px)"),b(f,"rows","5"),f.value=e[2],b(W,"class","svelte-1kcjh19"),b(O,"class","svelte-1kcjh19"),b(R,"class","svelte-1kcjh19"),b(s,"id","debug"),b(s,"class","svelte-1kcjh19")},m(c,I){_e(c,t,I),He(a,t,null),r(t,i),r(t,s),r(s,l),r(l,M),r(s,P),r(s,W),r(W,m),r(m,o),r(W,y),r(W,p),r(p,A),r(A,H),r(A,G),r(A,X),r(p,Y),r(p,U),r(U,v),r(U,T),r(p,z),r(p,f),r(s,N),r(s,O),r(O,V),r(V,K),r(O,J),r(O,F);for(let D=0;D<E.length;D+=1)E[D]&&E[D].m(F,null);r(s,Q),r(s,R),r(R,j),r(j,he),r(R,ye),r(R,Z),r(Z,pe),B=!0,ge||(Se=[oe(l,"click",e[4]),oe(f,"change",e[5]),oe(Z,"click",e[6]),oe(t,"dragstart",e[7])],ge=!0)},p(c,[I]){var se,q;const D={};if(I&1&&(D.currentMedia=c[0]),a.$set(D),(!B||I&8)&&d!==(d=c[3]?"Disable decorations":"Enable decorations")&&te(M,d),(!B||I&1)&&w!==(w=((q=(se=c[0])==null?void 0:se.session)==null?void 0:q.source)+"")&&te(T,w),(!B||I&4)&&(f.value=c[2]),I&2){ee=c[1];let L;for(L=0;L<ee.length;L+=1){const x=Ve(c,ee,L);E[L]?E[L].p(x,I):(E[L]=je(x),E[L].c(),E[L].m(F,null))}for(;L<E.length;L+=1)E[L].d(1);E.length=ee.length}},i(c){B||(Ge(a.$$.fragment,c),B=!0)},o(c){Xe(a.$$.fragment,c),B=!1},d(c){c&&u(t),Ye(a),ct(E,c),ge=!1,ut(Se)}}}function St(e,t,a){Ae("get_last_update",{message:""}).then(o=>{if(o.last_model_update&&xe({session:o.last_model_update.Model}),o.last_media_update){const[y,p]=o.last_media_update.Media;Fe({session:y,thumbnail:p})}}),Me("media_update",o=>{console.log("recv",o.event,o);const y=o.payload,[p,A]=y.Media;Fe({session:p,thumbnail:A})}),Me("model_update",o=>{console.log("recv",o.event,o);const y=o.payload;xe({session:y.Model})});let i,s,l;me.subscribe(o=>{const y=Tt(o.currentMedia,o.sourcePriority);a(0,i=y.at(0)),a(2,l=o.sourcePriority),a(1,s=y)});let d=!1;return ie().setDecorations(d),[i,s,l,d,()=>{a(3,d=!d),ie().setDecorations(d)},o=>{o.preventDefault(),me.update(y=>({...y,sourcePriority:o.currentTarget.value.toLowerCase()}))},()=>{ie().close()},o=>{o.preventDefault(),ie().startDragging()}]}class Ct extends Ee{constructor(t){super(),We(this,t,St,Lt,De,{})}}function It(e){let t,a,i;return a=new Ct({}),{c(){t=_("section"),Be(a.$$.fragment)},l(s){t=h(s,"SECTION",{});var l=g(t);qe(a.$$.fragment,l),l.forEach(u)},m(s,l){_e(s,t,l),He(a,t,null),i=!0},p:fe,i(s){i||(Ge(a.$$.fragment,s),i=!0)},o(s){Xe(a.$$.fragment,s),i=!1},d(s){s&&u(t),Ye(a)}}}class $t extends Ee{constructor(t){super(),We(this,t,null,It,De,{})}}export{$t as component,Rt as universal};
